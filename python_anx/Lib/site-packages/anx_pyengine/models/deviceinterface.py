import ipaddress
from dataclasses import field
from typing import Optional

from dataclasses_json import config, dataclass_json
from pydantic.dataclasses import dataclass

from .util import ipaddr_to_json_encoder


@dataclass_json
@dataclass
class DeviceInterface:
    identifier: str
    name: str
    ipv4_address: Optional[ipaddress.IPv4Address] = field(
        metadata=config(encoder=ipaddr_to_json_encoder, decoder=ipaddress.ip_address)
    )
    ipv6_address: Optional[ipaddress.IPv6Address] = field(
        metadata=config(encoder=ipaddr_to_json_encoder, decoder=ipaddress.ip_address)
    )
    device_identifier: str
    device_hostname: str
