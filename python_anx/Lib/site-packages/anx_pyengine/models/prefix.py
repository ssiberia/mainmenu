import ipaddress
from dataclasses import field

from dataclasses_json import config, dataclass_json
from pydantic.dataclasses import dataclass

from .util import PydanticConfig, ipaddr_to_json_encoder


@dataclass_json
@dataclass(config=PydanticConfig)
class Prefix:
    prefix: ipaddress._BaseNetwork = field(
        metadata=config(encoder=ipaddr_to_json_encoder, decoder=ipaddress.ip_network)
    )

    identifier: str
    locations: list
    customer_identifier: str
    aggregate_identifier: str
    rir_identifier: str
    rir_name: str
